// Generated by CoffeeScript 1.10.0
var alertError, displayShortenedUrl, form, link, shrBox, urlBox;

form = document.getElementById('shorten-form');

urlBox = form.elements[0];

link = document.getElementById('link');

shrBox = document.getElementById('shortened');

displayShortenedUrl = function(response) {
  if (response.data.error) {
    return alertError(response.data.error);
  }
  console.log("response", response);
  link.textContent = response.data.shortUrl;
  link.setAttribute('href', response.data.shortUrl);
  shrBox.style.opacity = '1';
  urlBox.value = '';
};

alertError = function(error) {
  console.log(error);
  alert('Error: Are you sure the URL is correct? Make sure it has http:// at the beginning.');
};

form.addEventListener('submit', function(event) {
  event.preventDefault();
  axios.post('/new', {
    url: urlBox.value
  }).then(displayShortenedUrl)["catch"](alertError);
});
